<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>FlowGraph Diagnostics System | FlowGraph </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="FlowGraph Diagnostics System | FlowGraph ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/prismify-co/FlowGraph/blob/master/docs/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="FlowGraph">
            FlowGraph
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="flowgraph-diagnostics-system">FlowGraph Diagnostics System</h1>

<p>This document describes the comprehensive logging and diagnostics infrastructure in FlowGraph.</p>
<h2 id="overview">Overview</h2>
<p>FlowGraph includes a robust, production-quality diagnostics system designed to help:</p>
<ul>
<li><strong>Developers</strong> debug rendering, input, and coordinate issues</li>
<li><strong>Contributors</strong> submit detailed bug reports with actionable context</li>
<li><strong>Users</strong> troubleshoot issues in their applications</li>
</ul>
<h2 id="quick-start">Quick Start</h2>
<h3 id="enable-basic-logging">Enable Basic Logging</h3>
<pre><code class="lang-csharp">using FlowGraph.Core.Diagnostics;

// Enable all logging at Debug level
FlowGraphLogger.EnableAll(LogLevel.Debug);

// Or configure through FlowCanvasSettings
var settings = new FlowCanvasSettings
{
    EnableDiagnostics = true,
    DiagnosticsMinimumLevel = LogLevel.Debug,
    DiagnosticsCategories = LogCategory.All
};
settings.ApplyDiagnosticsSettings();
</code></pre>
<h3 id="focused-debugging">Focused Debugging</h3>
<pre><code class="lang-csharp">// Only log rendering and node issues
FlowGraphLogger.Configure(config =&gt; config
    .Enable()
    .WithMinimumLevel(LogLevel.Debug)
    .WithCategories(LogCategory.Rendering | LogCategory.Nodes | LogCategory.CustomRenderers)
    .WriteToDebug()
    .WriteToFile(@&quot;C:\logs\flowgraph.log&quot;));
</code></pre>
<h2 id="log-levels">Log Levels</h2>
<table>
<thead>
<tr>
<th>Level</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Trace</code></td>
<td>Very fine-grained information (position changes, every render frame)</td>
</tr>
<tr>
<td><code>Debug</code></td>
<td>Useful debugging info (method entry/exit, state changes)</td>
</tr>
<tr>
<td><code>Information</code></td>
<td>General operational messages</td>
</tr>
<tr>
<td><code>Warning</code></td>
<td>Potential issues that don't prevent operation</td>
</tr>
<tr>
<td><code>Error</code></td>
<td>Errors that affect functionality</td>
</tr>
<tr>
<td><code>None</code></td>
<td>Disable all logging</td>
</tr>
</tbody>
</table>
<h2 id="log-categories">Log Categories</h2>
<p>Categories allow filtering logs to specific subsystems:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Graph</code></td>
<td>Graph-level operations (add/remove nodes, edges)</td>
</tr>
<tr>
<td><code>Rendering</code></td>
<td>Core rendering pipeline</td>
</tr>
<tr>
<td><code>Nodes</code></td>
<td>Node creation, movement, state</td>
</tr>
<tr>
<td><code>Edges</code></td>
<td>Edge creation, routing</td>
</tr>
<tr>
<td><code>Ports</code></td>
<td>Port operations</td>
</tr>
<tr>
<td><code>Input</code></td>
<td>Mouse/keyboard input handling</td>
</tr>
<tr>
<td><code>Viewport</code></td>
<td>Pan, zoom, viewport calculations</td>
</tr>
<tr>
<td><code>Coordinates</code></td>
<td>Coordinate transformations</td>
</tr>
<tr>
<td><code>Selection</code></td>
<td>Selection management</td>
</tr>
<tr>
<td><code>Commands</code></td>
<td>Undo/redo commands</td>
</tr>
<tr>
<td><code>Serialization</code></td>
<td>Save/load operations</td>
</tr>
<tr>
<td><code>Layout</code></td>
<td>Layout algorithms</td>
</tr>
<tr>
<td><code>Animation</code></td>
<td>Animation system</td>
</tr>
<tr>
<td><code>Performance</code></td>
<td>Performance metrics</td>
</tr>
<tr>
<td><code>CustomRenderers</code></td>
<td>Custom node/edge renderers</td>
</tr>
<tr>
<td><code>BackgroundRenderers</code></td>
<td>Background renderers</td>
</tr>
<tr>
<td><code>DataFlow</code></td>
<td>Data binding and flow</td>
</tr>
<tr>
<td><code>Groups</code></td>
<td>Group operations</td>
</tr>
<tr>
<td><code>All</code></td>
<td>All categories</td>
</tr>
</tbody>
</table>
<h2 id="log-sinks">Log Sinks</h2>
<h3 id="built-in-sinks">Built-in Sinks</h3>
<pre><code class="lang-csharp">// Debug output (Visual Studio Output window)
FlowGraphLogger.Configure(config =&gt; config.WriteToDebug());

// Console output with colors
FlowGraphLogger.Configure(config =&gt; config.WriteToConsole(useColors: true));

// File with automatic rotation
FlowGraphLogger.Configure(config =&gt; config.WriteToFile(
    path: @&quot;C:\logs\flowgraph.log&quot;,
    maxFileSizeMB: 10,
    maxFiles: 5));

// Memory sink for UI display
var memorySink = new MemoryLogSink(maxEntries: 1000);
memorySink.EntryAdded += entry =&gt; UpdateLogUI(entry);
FlowGraphLogger.Configure(config =&gt; config.WriteToMemory(memorySink));

// Multiple sinks
FlowGraphLogger.Configure(config =&gt; config
    .WriteToDebug()
    .WriteToFile(@&quot;C:\logs\flowgraph.log&quot;));
</code></pre>
<h3 id="custom-sinks">Custom Sinks</h3>
<pre><code class="lang-csharp">public class MyCustomSink : ILogSink
{
    public string Name =&gt; &quot;Custom&quot;;

    public void Write(LogEntry entry)
    {
        // Send to your logging system
        MyLogger.Log(entry.Message);
    }

    public void Flush() { }
}

FlowGraphLogger.Configure(config =&gt; config.WriteTo(new MyCustomSink()));
</code></pre>
<h2 id="using-the-logger">Using the Logger</h2>
<h3 id="direct-logging">Direct Logging</h3>
<pre><code class="lang-csharp">// Level-specific methods
FlowGraphLogger.Debug(LogCategory.Rendering, &quot;Starting render pass&quot;);
FlowGraphLogger.Info(LogCategory.Nodes, $&quot;Created node: {nodeId}&quot;);
FlowGraphLogger.Warn(LogCategory.Input, &quot;Click outside valid area&quot;);
FlowGraphLogger.Error(LogCategory.Serialization, &quot;Failed to load graph&quot;, exception: ex);

// With structured properties
FlowGraphLogger.Log(LogLevel.Debug, LogCategory.Nodes, &quot;Node positioned&quot;,
    new { NodeId = node.Id, X = node.X, Y = node.Y, Scale = scale });
</code></pre>
<h3 id="performance-aware-logging">Performance-Aware Logging</h3>
<pre><code class="lang-csharp">// Check before expensive message formatting
if (FlowGraphLogger.IsLevelEnabled(LogLevel.Debug, LogCategory.Rendering))
{
    var snapshot = graph.CreateDiagnosticSnapshot();
    FlowGraphLogger.Debug(LogCategory.Rendering, snapshot.ToString());
}
</code></pre>
<h3 id="timing-operations">Timing Operations</h3>
<pre><code class="lang-csharp">using (FlowGraphLogger.TimeScope(LogCategory.Rendering, &quot;Full render pass&quot;))
{
    RenderNodes();
    RenderEdges();
}
// Logs: BEGIN: Full render pass
// Logs: END: Full render pass [elapsed: 12.34ms]
</code></pre>
<h3 id="correlation-scopes">Correlation Scopes</h3>
<pre><code class="lang-csharp">using (FlowGraphLogger.BeginScope(&quot;DragOperation&quot;))
{
    FlowGraphLogger.Debug(LogCategory.Input, &quot;Started drag&quot;);
    // ... all logs in this scope share a correlation ID
    FlowGraphLogger.Debug(LogCategory.Nodes, &quot;Moved node&quot;);
}
</code></pre>
<h2 id="extension-methods">Extension Methods</h2>
<h3 id="graph-logging">Graph Logging</h3>
<pre><code class="lang-csharp">// Log current graph state
graph.LogGraphState(&quot;after layout&quot;, &quot;LayoutEngine&quot;);

// Get detailed snapshot
var snapshot = graph.CreateDiagnosticSnapshot();
Console.WriteLine(snapshot.ToString());
</code></pre>
<h3 id="nodeedge-logging">Node/Edge Logging</h3>
<pre><code class="lang-csharp">node.LogNodeCreated(&quot;MyRenderer&quot;);
node.LogNodeMoved(oldX, oldY, &quot;DragHandler&quot;);
edge.LogEdgeCreated(&quot;ConnectionManager&quot;);
</code></pre>
<h2 id="integration-with-flowcanvassettings">Integration with FlowCanvasSettings</h2>
<pre><code class="lang-csharp">var canvas = new FlowCanvas
{
    Settings = new FlowCanvasSettings
    {
        EnableDiagnostics = true,
        DiagnosticsMinimumLevel = LogLevel.Debug,
        DiagnosticsCategories = LogCategory.Rendering | LogCategory.Nodes,
        DiagnosticsLogFilePath = @&quot;C:\logs\flowgraph.log&quot;
    }
};

// Apply settings to global logger
canvas.Settings.ApplyDiagnosticsSettings();
</code></pre>
<h2 id="bug-reports">Bug Reports</h2>
<p>When submitting bug reports, enable full diagnostics and include the log output:</p>
<pre><code class="lang-csharp">// In your startup or when issue occurs
FlowGraphLogger.Configure(config =&gt; config
    .Enable()
    .WithMinimumLevel(LogLevel.Trace)
    .WithCategories(LogCategory.All)
    .WriteToFile(@&quot;C:\temp\flowgraph_bugreport.log&quot;));
</code></pre>
<p>Then include the generated log file with your bug report.</p>
<h2 id="thread-safety">Thread Safety</h2>
<p>The logging system is fully thread-safe:</p>
<ul>
<li>Multiple threads can log simultaneously</li>
<li>Configuration changes are atomic</li>
<li>File sinks use internal locking</li>
<li>Memory sinks are synchronized</li>
</ul>
<h2 id="performance-considerations">Performance Considerations</h2>
<ul>
<li><strong>Disabled logging</strong>: Near-zero overhead (single boolean check)</li>
<li><strong>Level/category check</strong>: Inline check, ~1ns</li>
<li><strong>Conditional attribute</strong>: <code>Trace</code> level calls are removed in Release builds</li>
<li><strong>Structured properties</strong>: Use anonymous types for automatic serialization</li>
<li><strong>Large outputs</strong>: Check <code>IsLevelEnabled</code> before expensive formatting</li>
</ul>
<h2 id="files">Files</h2>
<p>The diagnostics system consists of:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FlowGraph.Core/Diagnostics/LogLevel.cs</code></td>
<td>Log severity levels</td>
</tr>
<tr>
<td><code>FlowGraph.Core/Diagnostics/LogCategory.cs</code></td>
<td>Log categories (flags enum)</td>
</tr>
<tr>
<td><code>FlowGraph.Core/Diagnostics/LogEntry.cs</code></td>
<td>Structured log entry</td>
</tr>
<tr>
<td><code>FlowGraph.Core/Diagnostics/LogSinks.cs</code></td>
<td>Built-in sink implementations</td>
</tr>
<tr>
<td><code>FlowGraph.Core/Diagnostics/FlowGraphLogger.cs</code></td>
<td>Central static logger</td>
</tr>
<tr>
<td><code>FlowGraph.Core/Diagnostics/LoggingExtensions.cs</code></td>
<td>Extension methods</td>
</tr>
</tbody>
</table>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/prismify-co/FlowGraph/blob/master/docs/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          2026 Prismify LLC. Licensed under MIT.
        </div>
      </div>
    </footer>
  </body>
</html>
